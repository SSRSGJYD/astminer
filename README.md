# astminer

A library for mining of [path-based representations of code](https://arxiv.org/pdf/1803.09544.pdf). The code 




## About
Astminer is an offspring of an internal utility from a research project.

Currently it supports extraction of path-based representations and raw ASTs from code in Java and Python, but it is designed to be very easily extensible.

The default output format is inspired by [code2vec](https://github.com/tech-srl/code2vec).



## Usage

### Examples

A few [simple usage examples](src/main/kotlin/astminer/examples) can be run with `./gradlew run`.

A somewhat more verbose [example of usage in Java](src/main/kotlin/astminer/examples/AllJavaFiles.kt) is available as well.



### Parsing C/C++

For now C/C++ support is handled by wrapping [Joern](https://github.com/octopus-platform/joern) parser 
(in fact, by its [extended version](https://github.com/egor-bogomolov/joern)). 

You need to make a few extra steps to use astminer with C/C++ code:

* `scripts/joern/setup.sh` &ndash; download and build Joern (after this step you can use the wrapper);
* `scripts/joern/run.sh pathToDirectory` &ndash; process the directory recursively by Joern (if you want to use it separately from the wrapper); 
* `scripts/joern/clean.sh` &ndash; remove files generated by Joern;
* `scripts/joern/update.sh` &ndash; pull changes from the [repository](https://github.com/egor-bogomolov/joern) and rebuild Joern.

A [usage example](src/main/kotlin/astminer/examples/AllCppFiles.kt) is available.



## Other languages

Support for a new programming language can be implemented in a few simple steps:
1. Add the corresponding [ANTLR4 grammar file](https://github.com/antlr/grammars-v4) to the `antlr` directory;
2. Run the `antlr4` Gradle task to generate the parser;
3. Implement a very minimal wrapper around the generated parser.
See [JavaParser](src/main/kotlin/astminer/parse/antlr/java/JavaParser.kt) or [PythonParser](src/main/kotlin/astminer/parse/antlr/python/PythonParser.kt) for an example of a wrapper.

## Contribution
We believe that astminer could find use beyond our own mining tasks.

Please help make astminer easier to use by sharing your potential use cases.
Pull requests are welcome as well! Support for other languages and documentation are the key areas of improvement. 

## Citing astminer
A paper dedicated to astminer (more precisely, to its older version [PathMiner](https://github.com/vovak/astminer/tree/pathminer)) was presented at [MSR'19](https://2019.msrconf.org/). [Preprint](https://zenodo.org/record/2595271).

If you use astminer in your academic work, please consider citing the paper:
```
@inproceedings{kovalenko2019pathminer,
  title={PathMiner: a library for mining of path-based representations of code},
  author={Kovalenko, Vladimir and Bogomolov, Egor and Bryksin, Timofey and Bacchelli, Alberto},
  booktitle={Proceedings of the 16th International Conference on Mining Software Repositories},
  pages={13--17},
  year={2019},
  organization={IEEE Press}
}
```
